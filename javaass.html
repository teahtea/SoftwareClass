<!DOCTYPE html>
<html>
  <head>
    <title>APEX Store Valentine's Day Draw</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <div class="p-5">
      <h1 class="d-flex justify-content-center">APEX STORE</h1>
      <p>
        The store is currently running a promo for online shopper, there will be
        a VALENTINE'S DAY prize draw
        <b
          >for the customers who purchase up to goods worth N20,000 or up to
          item items in one transaction. </b
        >The interface below has been designed for customers to enter the prize
        draw.
      </p>
      <div>
        <div>
          <h3>Get Your Shopping Bag Ready........</h3>
        </div>

        <table class="table">
          <thead>
            <tr>
              <th scope="col">Item</th>
              <th scope="col">Quantity</th>
              <th scope="col">Price</th>
              <th scope="col">Check</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <th scope="row">
                <img
                  src="./game-icons--sleeveless-top.svg"
                  alt="pic"
                  width="50px"
                  height="30px"
                />
              </th>
              <td>
                <input
                  type="number"
                  id="quantity1"
                  value=""
                  onChange="updateTotalItems(1)"
                /><br /><br />
              </td>
              <td>
                <input
                  type="number"
                  id="price1"
                  value=""
                  onChange="updateTotalItems(1)"
                /><br /><br />
              </td>
              <td><p id="check1"></p></td>
            </tr>
            <tr>
              <th scope="row">
                <img
                  src="./streamline-emojis--t-shirt.svg"
                  alt="pic"
                  width="50px"
                  height="30px"
                />
              </th>
              <td>
                <input
                  type="number"
                  id="quantity2"
                  value=""
                  onChange="updateTotalItems(2)"
                /><br /><br />
              </td>
              <td>
                <input
                  type="number"
                  id="price2"
                  value=""
                  onChange="updateTotalItems(2)"
                /><br />
              </td>
              <td><p id="check2"></p></td>
            </tr>
            <tr>
              <th scope="row">
                <img
                  src="./ph--t-shirt-fill.svg"
                  alt="pic"
                  width="50px"
                  height="30px"
                />
              </th>
              <td>
                <input
                  type="number"
                  id="quantity3"
                  value=""
                  onChange="updateTotalItems(3)"
                /><br /><br />
              </td>
              <td>
                <input
                  type="number"
                  id="price3"
                  value=""
                  onChange="updateTotalItems(3)"
                /><br /><br />
              </td>
              <td><p id="check3"></p></td>
            </tr>
          </tbody>
        </table>
        <div class="d-grid gap-2">
          <button
            class="btn btn-danger"
            type="button"
            onclick="checkEligibility()"
          >
            Check Eligibility
          </button>
        </div>
      </div>
      <div id="message" class="d-flex justify-content-between">
        <div>
          <img
            src="./verify.png"
            id="image1"
            alt="pic"
            class="img-fluid d-none"
            width="70"
          />
          <img
            src="./tryagain.png"
            id="image2"
            alt="pic"
            class="img-fluid d-none"
            width="70"
          />
        </div>
        <div>
          <p class="ps-5" id="verify"></p>
          <p class="ps-5" id="tryagain"></p>
        </div>
      </div>
    </div>

    <script>
      function updateTotalItems(itemNumber) {
        let quantity = parseInt(
          document.getElementById(`quantity${itemNumber}`).value
        );
        let price = parseInt(
          document.getElementById(`price${itemNumber}`).value
        );

        if(!isNaN(quantity) && !isNaN(price)){
        let total = quantity * price;
        document.getElementById(`check${itemNumber}`).innerHTML =
          total.toFixed(2);
        }else{
          document.getElementById(`check${itemNumber}`).innerHTML= "0.00"
        }
      }
      function checkEligibility() {
        let totalItems = 0;
        let totalCost = 0;

        for (i = 1; i <= 3; i++) {
          let quantity = parseInt(document.getElementById( `quantity${i}`).value);
          let price = parseInt(document.getElementById(`price${i}`).value);
          if(!isNaN(quantity) && !isNaN(price)){
            totalItems += quantity;
            totalCost += quantity * price;
          }
        }

        let averageCost = totalItems === 0 ? 0 : totalCost / totalItems;

        let resultElement = totalItems >= 10 || totalCost >= 20000;

        let verifyElement = document.getElementById("verify");
        let tryAgainElement = document.getElementById("tryagain");
        let image1Element = document.getElementById("image1");
        let image2Element = document.getElementById("image2");

        if (resultElement) {
          verifyElement.innerHTML = `Congratulations! You are eligible for the Valentine's Day prize draw.  Total items:  ${totalItems}, Total cost: ${totalCost} , Average cost: N ${totalItems.toFixed(
            0
          )}`;
          tryAgainElement.innerHTML = "";
          image1Element.classList.remove('d-none');
          image2Element.classList.add('d-none');
        } else {
          tryAgainElement.innerHTML = `Sorry, you are not eligible for the draw. To qualify, purchase at least 10 items or goods worth N20,000. 
            Total items:  ${totalItems}, Total cost: ${totalCost} , Average cost: N ${totalItems.toFixed(
            0
          )}`;
          verifyElement.innerHTML = "";
          image1Element.classList.add('d-none');
          image2Element.classList.remove('d-none');
        }
      }
    </script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
